
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catalog Shopee ‚Äî Thor</title>
  <meta name="description" content="Catalog tr∆∞ng b√†y s·∫£n ph·∫©m Shopee b·∫±ng ·∫£nh ri√™ng, c√≥ l·ªçc danh m·ª•c, pop‚Äëup Quick View v√† gi·ªè h√†ng c·ª•c b·ªô." />

  <!-- THEME -->
  <style>
    :root{
      /* Vibe Shopee (cam) */
      --bg:#0f1220; --bg-alt:#121630; --txt:#e6e8f0; --txt-muted:#9aa3b2;
      --border:#23284a; --primary:#ff6a00; --primary-2:#ff8f3f;
      --accent:#e53935; --accent-2:#ffd166;
      --shadow:0 18px 40px rgba(0,0,0,.35); --radius:16px; --wrap:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--txt);font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif}
    a{color:var(--primary-2);text-decoration:none}
    a:hover{text-decoration:underline}
    img{max-width:100%;display:block}
    .wrap{max-width:var(--wrap);margin:0 auto;padding:0 22px}

    /* HEADER */
    .site-header{position:sticky;top:0;z-index:999;background:rgba(18,22,48,.65);
      backdrop-filter:blur(10px) saturate(1.2);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:baseline;gap:10px}
    .brand h1{margin:0;font-weight:800;font-size:22px;letter-spacing:.4px}
    .brand .date{font-size:13px;color:var(--txt-muted)}
    .menu{display:flex;gap:18px;font-weight:600}
    .menu a{padding:8px 10px;border-radius:10px}
    .menu a:hover{background:rgba(255,255,255,.08)}
    .cart-btn{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#141414;border:none;
      padding:8px 12px;border-radius:999px;font-weight:800;cursor:pointer;box-shadow:0 10px 24px rgba(255,106,0,.35)}
    .cart-count{background:#141414;color:#fff;border-radius:999px;padding:2px 8px;font-size:12px}

    /* HERO */
    .hero{padding:46px 0 34px;border-bottom:1px solid var(--border);
      background: radial-gradient(1200px 400px at 10% -10%, rgba(229,57,53,.28), transparent 60%),
                  radial-gradient(1200px 400px at 90% -20%, rgba(255,209,102,.18), transparent 60%) }
    .hero-eyebrow{font-size:12px;color:var(--accent-2);letter-spacing:2px;text-transform:uppercase}
    .hero-title{margin:.2rem 0 0;font-size:40px;line-height:1.06;font-weight:800;
      background:linear-gradient(90deg,var(--txt),#b2b8c6 60%,var(--txt));
      -webkit-background-clip:text;background-clip:text;color:transparent}
    .hero p{color:var(--txt-muted);max-width:720px}

    /* SECTION */
    .section{padding:42px 0;border-bottom:1px solid var(--border)}
    .section h3{margin:0 0 18px;font-size:22px;font-weight:800;letter-spacing:.3px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}

    /* FILTERS */
    .filters{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 16px}
    .chip{padding:8px 12px;border:1px solid var(--border);border-radius:999px;color:var(--txt);cursor:pointer}
    .chip.active{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#141414;border-color:transparent}
    .search{display:flex;gap:10px;margin-top:8px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--bg-alt);color:var(--txt)}

    /* CARD PRODUCT */
    .card{border:1px solid var(--border);border-radius:var(--radius);background:var(--bg-alt);
      padding:0;box-shadow:var(--shadow);cursor:pointer;position:relative;display:flex;flex-direction:column}
    .card .thumb{aspect-ratio:4/3;border-bottom:1px solid var(--border);background:#1a1f3a;display:flex;align-items:center;justify-content:center}
    .card .thumb img{width:100%;height:100%;object-fit:cover;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}
    .card .body{padding:14px 14px 12px}
    .card strong{color:var(--accent-2);font-weight:700}
    .card h4{margin:.3rem 0 .35rem;font-weight:800;line-height:1.25}
    .price{color:#9fe0ff;font-weight:800}
    .card .actions{display:flex;gap:8px;margin-top:10px}
    .btn{border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-weight:700;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#141414;border-color:transparent}
    .btn.outline{background:transparent;color:var(--txt)}
    .card::after{content:"";position:absolute;inset:0;border-radius:inherit;transition:box-shadow .25s ease, transform .25s ease}
    .card:hover::after{box-shadow:0 0 0 2px rgba(255,106,0,.35);transform:translateY(-2px)}

    /* REVEAL (Massively-like) */
    .reveal{opacity:0;transform:translateY(24px);transition:opacity 700ms ease,transform 700ms ease;will-change:opacity,transform}
    .reveal.is-in{opacity:1;transform:none}
    .left{transform:translateX(-36px)} .right{transform:translateX(36px)} .up{transform:translateY(36px)}
    .is-in.left,.is-in.right,.is-in.up{transform:none}
    html{scroll-behavior:smooth} :target{scroll-margin-top:84px}
    .grid .reveal:nth-child(1){transition-delay:0ms}
    .grid .reveal:nth-child(2){transition-delay:90ms}
    .grid .reveal:nth-child(3){transition-delay:180ms}
    .grid .reveal:nth-child(4){transition-delay:270ms}
    .grid .reveal:nth-child(5){transition-delay:360ms}
    .grid .reveal:nth-child(6){transition-delay:450ms}

    /* POP‚ÄëUP (Quick View) */
    .popup{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1000;
      background:rgba(0,0,0,.55);backdrop-filter:blur(4px)}
    .popup.show{display:flex}
    .popup-card{width:min(820px,92vw);border-radius:18px;border:1px solid var(--border);
      background:var(--bg-alt);color:var(--txt);box-shadow:0 28px 80px rgba(0,0,0,.55);
      transform:translateY(16px);opacity:0;animation:popIn .36s ease forwards}
    @keyframes popIn{to{transform:none;opacity:1}}
    .popup-head{padding:18px 20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .popup-source{color:var(--accent-2);font-weight:700}
    .popup-title{margin:.3rem 0 0;font-size:20px;font-weight:800}
    .popup-body{padding:0 20px 18px;color:var(--txt-muted);line-height:1.5;display:grid;grid-template-columns:280px 1fr;gap:16px}
    .popup-body img{width:100%;border-radius:14px;border:1px solid var(--border)}
    .popup-summary{margin-top:6px}
    .popup-price{color:#9fe0ff;font-weight:800}
    .popup-actions{padding:18px 20px;border-top:1px solid var(--border);display:flex;gap:12px;justify-content:flex-end}
    .close-x{border:none;background:transparent;color:var(--txt-muted);font-size:22px;cursor:pointer}

    /* CART DRAWER */
    .drawer{position:fixed;top:0;right:0;width:min(380px,92vw);height:100vh;background:var(--bg-alt);border-left:1px solid var(--border);
      box-shadow:-8px 0 24px rgba(0,0,0,.35);transform:translateX(100%);transition:transform .3s ease;z-index:1001}
    .drawer.show{transform:none}
    .drawer-head{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
    .drawer-list{padding:12px 16px;display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 210px);overflow:auto}
    .drawer-item{display:flex;gap:10px;border:1px solid var(--border);border-radius:12px;padding:10px;background:#0e152f}
    .drawer-item img{width:64px;height:64px;object-fit:cover;border-radius:8px;border:1px solid var(--border)}
    .drawer-item .meta{flex:1}
    .drawer-foot{padding:14px 16px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:10px}
    .total{display:flex;justify-content:space-between;font-weight:800}
    .drawer-actions{display:flex;gap:8px}
    .empty{color:var(--txt-muted);text-align:center;padding:20px}
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="site-header reveal up">
    <div class="wrap nav">
      <div class="brand">
        <h1>Catalog Shopee <span aria-hidden="true">üõçÔ∏è</span></h1>
        <span class="date">C·∫≠p nh·∫≠t: 07-01-2026</span>
      </div>
      <nav class="menu">
        #featuredN·ªïi b·∫≠t</a>
        #catalogDanh m·ª•c</a>
        #howH∆∞·ªõng d·∫´n</a>
        #contactLi√™n h·ªá</a>
      </nav>
      <button id="openCart" class="cart-btn" aria-label="M·ªü gi·ªè h√†ng">
        <span>Gi·ªè h√†ng</span><span id="cartCount" class="cart-count">0</span>
      </button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero reveal up">
    <div class="wrap">
      <div class="hero-eyebrow">Tr∆∞ng b√†y s·∫£n ph·∫©m | ·∫¢nh ri√™ng</div>
      <h2 class="hero-title">B·ªô s∆∞u t·∫≠p & Deal hot</h2>
      <p>·∫¢nh s·∫£n ph·∫©m d√πng ·∫£nh b·∫°n t·ª± ch·ª•p/thi·∫øt k·∫ø. Click v√†o th·∫ª ƒë·ªÉ xem nhanh trong pop‚Äëup, sau ƒë√≥ b·∫•m <b>Mua ngay</b> ƒë·ªÉ v√†o Shopee.</p>
    </div>
  </section>

  <!-- FEATURED -->
  <section id="featured" class="section reveal left">
    <div class="wrap">
      <h3>N·ªïi b·∫≠t</h3>
      <div class="grid">
        <!-- V√≠ d·ª• n·ªïi b·∫≠t: m·ªôt v√†i s·∫£n ph·∫©m hot -->
        <article class="card reveal up product"
                 data-category="DienTu"
                 data-url="https://shopee.vn/product-abc"
                 data-summary="Tai nghe True Wireless ‚Äî pin 30h, ch·ªëng ·ªìn, s·∫°c nhanh."
                 data-name="Tai nghe Bluetooth X12"
                 data-price="299000">
          <div class="thumb">
            <!-- ·∫¢nh kh√¥ng t·ª´ link Shopee: d√πng file n·ªôi b·ªô/images CDN c·ªßa b·∫°n -->
            images/sp_tainghe.jpg
          </div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>Tai nghe Bluetooth X12</h4>
            <div class="price">299.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>

        <article class="card reveal up product"
                 data-category="GiaDung"
                 data-url="https://shopee.vn/product-def"
                 data-summary="B√¨nh gi·ªØ nhi·ªát 800ml ‚Äî v·ªè th√©p, gi·ªØ n√≥ng/l·∫°nh 8‚Äì12h."
                 data-name="B√¨nh gi·ªØ nhi·ªát Inox 800ml"
                 data-price="189000">
          <div class="thumb">images/sp_binhgiu.jpg</div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>B√¨nh gi·ªØ nhi·ªát Inox 800ml</h4>
            <div class="price">189.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- CATALOG -->
  <section id="catalog" class="section reveal right">
    <div class="wrap">
      <h3>Danh m·ª•c</h3>

      <!-- FILTERS -->
      <div class="filters">
        <span class="chip active" data-filter="All">T·∫•t c·∫£</span>
        <span class="chip" data-filter="DienTu">ƒêi·ªán t·ª≠</span>
        <span class="chip" data-filter="ThoiTrang">Th·ªùi trang</span>
        <span class="chip" data-filter="GiaDung">Gia d·ª•ng</span>
        <span class="chip" data-filter="LamDep">L√†m ƒë·∫πp</span>
      </div>
      <div class="search">
        <input id="searchInput" type="text" placeholder="T√¨m s·∫£n ph·∫©m (v√≠ d·ª•: tai nghe, √°o thun...)" />
      </div>

      <div class="grid" id="productGrid">
        <!-- M·ªôt s·ªë s·∫£n ph·∫©m m·∫´u -->
        <article class="card reveal up product"
                 data-category="ThoiTrang"
                 data-url="https://shopee.vn/product-shirt"
                 data-summary="√Åo thun unisex 280gsm ‚Äî co gi√£n, form r·ªông."
                 data-name="√Åo thun Basic Unisex"
                 data-price="129000">
          <div class="thumb">images/sp_aothun.jpg</div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>√Åo thun Basic Unisex</h4>
            <div class="price">129.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>

        <article class="card reveal up product"
                 data-category="LamDep"
                 data-url="https://shopee.vn/product-skincare"
                 data-summary="Serum d∆∞·ª°ng ·∫©m ‚Äî HA 2%, da cƒÉng m·ªãn."
                 data-name="Serum HA 2% 30ml"
                 data-price="159000">
          <div class="thumb">images/sp_serum.jpg</div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>Serum HA 2% 30ml</h4>
            <div class="price">159.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>

        <article class="card reveal up product"
                 data-category="GiaDung"
                 data-url="https://shopee.vn/product-pan"
                 data-summary="Ch·∫£o ch·ªëng d√≠nh 28cm ‚Äî ƒë√°y t·ª´, tay c·∫ßm g·ªó."
                 data-name="Ch·∫£o ch·ªëng d√≠nh 28cm"
                 data-price="239000">
          <div class="thumb">images/sp_chao.jpg</div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>Ch·∫£o ch·ªëng d√≠nh 28cm</h4>
            <div class="price">239.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>

        <article class="card reveal up product"
                 data-category="DienTu"
                 data-url="https://shopee.vn/product-kb"
                 data-summary="B√†n ph√≠m c∆° RK ‚Äî LED RGB, switch brown."
                 data-name="B√†n ph√≠m c∆° RK RGB"
                 data-price="699000">
          <div class="thumb">images/sp_keyboard.jpg</div>
          <div class="body">
            <strong>Shop Thor</strong>
            <h4>B√†n ph√≠m c∆° RK RGB</h4>
            <div class="price">699.000ƒë</div>
            <div class="actions">
              <button class="btn outline btn-view">Xem nhanh</button>
              <button class="btn primary btn-buy">Mua ngay</button>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how" class="section reveal up">
    <div class="wrap">
      <h3>H∆∞·ªõng d·∫´n d√πng catalog</h3>
      <ul>
        <li>·∫¢nh s·∫£n ph·∫©m l√† ·∫£nh ri√™ng (th∆∞ m·ª•c <code>/images</code> ho·∫∑c CDN c·ªßa b·∫°n), <b>kh√¥ng</b> l·∫•y ·∫£nh t·ª´ link Shopee.</li>
        <li>Click th·∫ª ‚Üí pop‚Äëup hi·ªÉn th·ªã ·∫£nh l·ªõn + gi√° + m√¥ t·∫£, r·ªìi b·∫•m <b>Mua ngay</b> ƒë·ªÉ m·ªü trang Shopee.</li>
        <li>D√πng chip <b>L·ªçc danh m·ª•c</b> ho·∫∑c √¥ <b>T√¨m ki·∫øm</b> ƒë·ªÉ l·ªçc s·∫£n ph·∫©m.</li>
        <li>B·∫•m <b>Th√™m v√†o gi·ªè</b> ƒë·ªÉ l∆∞u v√†o <em>gi·ªè h√†ng c·ª•c b·ªô</em> (gi·ªØ b·∫±ng <code>localStorage</code>).</li>
      </ul>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section reveal left">
    <div class="wrap">
      <h3>Li√™n h·ªá</h3>
      <p>Mu·ªën m√¨nh import t·ª´ file Excel/CSV ho·∫∑c t·ª± ƒë·ªông l·∫•y feed, n√≥i m√¨nh‚Äîm√¨nh s·∫Ω th√™m ngay.</p>
      <p style="color:var(--txt-muted)">FROM MR. THOR WITH LOVE</p>
    </div>
  </section>

  <!-- POP‚ÄëUP -->
  <div id="popup" class="popup" aria-modal="true" role="dialog" aria-hidden="true">
    <div class="popup-card">
      <div class="popup-head">
        <div>
          <div class="popup-source" id="popupSource">Shop Thor</div>
          <div class="popup-title" id="popupTitle">T√™n s·∫£n ph·∫©m</div>
        </div>
        <button class="close-x" id="popupClose" aria-label="ƒê√≥ng">√ó</button>
      </div>
      <div class="popup-body">
        <img id="popupImg" alt="·∫¢nh s·∫£n ph·∫©m" />
        <div>
          <div class="popup-price" id="popupPrice">0ƒë</div>
          <div class="popup-summary" id="popupSummary">M√¥ t·∫£ ng·∫Øn‚Ä¶</div>
        </div>
      </div>
      <div class="popup-actions">
        <a id="popupOpen" class="btn primary" target="_blank" rel="noopener">Mua ngay (Shopee) ‚Üí</a>
        <button class="btn outline" id="popupAdd">Th√™m v√†o gi·ªè</button>
        <button class="btn outline" id="popupDismiss">ƒê√≥ng</button>
      </div>
    </div>
  </div>

  <!-- CART DRAWER -->
  <aside id="drawer" class="drawer" aria-hidden="true">
    <div class="drawer-head">
      <strong>Gi·ªè h√†ng</strong>
      <button class="close-x" id="closeCart" aria-label="ƒê√≥ng">√ó</button>
    </div>
    <div id="cartList" class="drawer-list">
      <div class="empty">Gi·ªè ƒëang tr·ªëng</div>
    </div>
    <div class="drawer-foot">
      <div class="total"><span>T·ªïng</span><span id="cartTotal">0ƒë</span></div>
      <div class="drawer-actions">
        <button id="checkoutShopee" class="btn primary">Mua tr√™n Shopee</button>
        <button id="clearCart" class="btn outline">X√≥a gi·ªè</button>
      </div>
    </div>
  </aside>

  <!-- TO‚ÄëTOP -->
  <button id="toTop" class="to-top" aria-label="V·ªÅ ƒë·∫ßu trang">‚Üë</button>

  <!-- JS -->
  <script>
    (function(){
      /* Reveal on scroll */
      const opts={root:null,rootMargin:'0px 0px -10% 0px',threshold:.15};
      const io=new IntersectionObserver((ents)=>{
        ents.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('is-in'); io.unobserve(e.target); } });
      },opts);
      document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

      /* To‚Äëtop */
      const btnTop=document.getElementById('toTop');
      addEventListener('scroll',()=>{ if(scrollY>240) btnTop.classList.add('show'); else btnTop.classList.remove('show'); },{passive:true});
      btnTop.addEventListener('click',()=>scrollTo({top:0,behavior:'smooth'}));

      /* ===== Catalog logic ===== */
      const formatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND', maximumFractionDigits: 0 });

      // Fallback ·∫£nh n·∫øu kh√¥ng t√¨m th·∫•y file
      document.querySelectorAll('.product .thumb img').forEach(img=>{
        img.onerror = () => { img.style.display='none'; img.parentElement.style.background = 'linear-gradient(135deg,#1b2142,#0f1220)'; };
      });

      /* Quick View Pop‚Äëup */
      const popup=document.getElementById('popup');
      const popupImg=document.getElementById('popupImg');
      const popupSource=document.getElementById('popupSource');
      const popupTitle=document.getElementById('popupTitle');
      const popupPrice=document.getElementById('popupPrice');
      const popupSummary=document.getElementById('popupSummary');
      const popupOpen=document.getElementById('popupOpen');
      const popupAdd=document.getElementById('popupAdd');
      const popupClose=document.getElementById('popupClose');
      const popupDismiss=document.getElementById('popupDismiss');

      let currentItem = null;

      function openPopup(item){
        currentItem = item;
        popupSource.textContent = 'Shop Thor';
        popupTitle.textContent  = item.name;
        popupPrice.textContent  = formatter.format(item.price || 0);
        popupSummary.textContent= item.summary || '';
        popupOpen.href          = item.url || '#';
        popupImg.src            = item.img || '';

        popup.classList.add('show');
        popup.setAttribute('aria-hidden','false');
      }
      function closePopup(){
        popup.classList.remove('show');
        popup.setAttribute('aria-hidden','true');
        currentItem = null;
      }
      popupClose.addEventListener('click',closePopup);
      popupDismiss.addEventListener('click',closePopup);
      popup.addEventListener('click',(e)=>{ if(e.target===popup) closePopup(); });
      addEventListener('keydown',(e)=>{ if(e.key==='Escape') closePopup(); });

      // Click tr√™n card
      document.querySelectorAll('.product').forEach(card=>{
        const btnView = card.querySelector('.btn-view');
        const btnBuy  = card.querySelector('.btn-buy');

        function getItem(){
          const name   = card.getAttribute('data-name')   || card.querySelector('h4')?.textContent?.trim() || '';
          const price  = parseInt(card.getAttribute('data-price') || '0', 10);
          const url    = card.getAttribute('data-url')    || '#';
          const summary= card.getAttribute('data-summary')|| '';
          const img    = card.querySelector('img')?.src || '';
          const cat    = card.getAttribute('data-category') || 'Khac';
          return { name, price, url, summary, img, cat };
        }

        card.addEventListener('click',(e)=>{
          // N·∫øu b·∫•m n√∫t b√™n trong, ƒë·ªÉ s·ª± ki·ªán ri√™ng x·ª≠ l√Ω
          if (e.target.closest('.actions')) return;
          openPopup(getItem());
        });
        btnView?.addEventListener('click',(e)=>{ e.stopPropagation(); openPopup(getItem()); });
        btnBuy?.addEventListener('click',(e)=>{ e.stopPropagation(); const it=getItem(); if (it.url && it.url!=='#') window.open(it.url,'_blank','noopener'); });
      });

      // Th√™m v√†o gi·ªè t·ª´ pop‚Äëup
      popupAdd.addEventListener('click',()=>{
        if (!currentItem) return;
        addToCart(currentItem);
        closePopup();
      });

      /* ===== Cart (localStorage) ===== */
      const CART_KEY='thor_cart';
      const drawer=document.getElementById('drawer');
      const openCart=document.getElementById('openCart');
      const closeCart=document.getElementById('closeCart');
      const cartList=document.getElementById('cartList');
      const cartTotal=document.getElementById('cartTotal');
      const checkoutShopee=document.getElementById('checkoutShopee');
      const clearCart=document.getElementById('clearCart');
      const cartCountEl=document.getElementById('cartCount');

      function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY)||'[]'); }catch(e){ return []; } }
      function setCart(items){ localStorage.setItem(CART_KEY, JSON.stringify(items)); renderCart(); }

      function addToCart(item){
        const items = getCart();
        const idx = items.findIndex(x=>x.name===item.name && x.url===item.url);
        if (idx>=0) items[idx].qty = (items[idx].qty||1)+1;
        else items.push({ ...item, qty:1 });
        setCart(items);
      }
      function removeFromCart(name){
        const items = getCart().filter(x=>x.name!==name);
        setCart(items);
      }
      function renderCart(){
        const items = getCart();
        cartList.innerHTML='';
        if (!items.length){
          cartList.innerHTML = '<div class="empty">Gi·ªè ƒëang tr·ªëng</div>';
          cartTotal.textContent = formatter.format(0);
          cartCountEl.textContent = '0';
          return;
        }
        let total = 0;
        items.forEach(it=>{
          total += (it.price||0) * (it.qty||1);
          const row = document.createElement('div');
          row.className='drawer-item';
          row.innerHTML = `
            # " alt="">
            <div class="meta">
              <div style="font-weight:800">${it.name}</div>
              <div style="color:#9fe0ff">${formatter.format(it.price||0)} √ó ${it.qty||1}</div>
              ${it.url ? '#Mua ngay ‚Üí</a>' : ''}
            </div>
            <div>
              <button class="btn outline btn-remove">X√≥a</button>
            </div>
          `;
          const imgEl = row.querySelector('img');
          imgEl.src = it.img || '';
          // remove
          row.querySelector('.btn-remove').addEventListener('click',()=>removeFromCart(it.name));
          // buy
          const buyEl = row.querySelector('.btn-buy-row');
          buyEl?.addEventListener('click',()=>{ if (it.url && it.url!=='#') window.open(it.url,'_blank','noopener'); });
          cartList.appendChild(row);
        });
        cartTotal.textContent = formatter.format(total);
        cartCountEl.textContent = items.reduce((s,x)=>s+(x.qty||1),0);
      }
      renderCart();

      // Drawer open/close
      openCart.addEventListener('click',()=>{ drawer.classList.add('show'); drawer.setAttribute('aria-hidden','false'); });
      closeCart.addEventListener('click',()=>{ drawer.classList.remove('show'); drawer.setAttribute('aria-hidden','true'); });

      // Checkout: m·ªü t·∫•t c·∫£ link Shopee m·ªói s·∫£n ph·∫©m (c·∫£nh b√°o: tr√¨nh duy·ªát c√≥ th·ªÉ ch·∫∑n n·∫øu qu√° nhi·ªÅu)
      checkoutShopee.addEventListener('click',()=>{
        const items=getCart().filter(x=>x.url && x.url!=='#');
        if (!items.length){ alert('Gi·ªè ch∆∞a c√≥ s·∫£n ph·∫©m c√≥ link Shopee.'); return; }
        items.forEach((it,i)=>{ setTimeout(()=>window.open(it.url,'_blank','noopener'), i*120); });
      });

      clearCart.addEventListener('click',()=>{
        if (confirm('X√≥a to√†n b·ªô gi·ªè h√†ng?')) setCart([]);
      });

      /* ===== Filters & Search ===== */
      const chips = document.querySelectorAll('.chip');
      chips.forEach(ch=>{
        ch.addEventListener('click',()=>{
          chips.forEach(c=>c.classList.remove('active'));
          ch.classList.add('active');
          const cat = ch.getAttribute('data-filter');
          filterProducts(cat, searchInput.value.trim());
        });
      });

      const searchInput=document.getElementById('searchInput');
      searchInput.addEventListener('input',()=>filterProducts(getActiveCat(), searchInput.value.trim()));

      function getActiveCat(){ const a=document.querySelector('.chip.active'); return a?a.getAttribute('data-filter'):'All'; }
      function filterProducts(cat, keyword){
        const cards = document.querySelectorAll('.product');
        const kw = (keyword||'').toLowerCase();
        cards.forEach(card=>{
          const c = card.getAttribute('data-category');
          const name = (card.getAttribute('data-name') || card.querySelector('h4')?.textContent || '').toLowerCase();
          const okCat = (cat==='All' || c===cat);
          const okKw  = (!kw || name.includes(kw));
          card.style.display = (okCat && okKw) ? '' : 'none';
        });
      }

      /* Anchor focus nh·∫π */
      addEventListener('hashchange',()=>{
        const t=document.getElementById(location.hash.slice(1));
        if(t){ t.setAttribute('tabindex','-1'); t.focus({preventScroll:true}); setTimeout(()=>t.removeAttribute('tabindex'),500); }
      });
    })();
  </script>
</body>
